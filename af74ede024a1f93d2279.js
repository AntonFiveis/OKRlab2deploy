!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o(this,e),this._text=t,this._title=this.findTitleFromText(t),this._selected=!0,this._createdDate=new Date,this._editedDate=new Date,this._urlID=+this._createdDate}var t,n,a;return t=e,(n=[{key:"get_urlID",value:function(){return this._urlID}},{key:"findTitleFromText",value:function(e){var t=e.slice(0,20).replace("\n","");return""!==t?t:"New Note"}},{key:"setSelected",value:function(e){this._selected=e}},{key:"getSelected",value:function(){return this._selected}},{key:"setText",value:function(e){this._text=e,this._editedDate=new Date,this._title=this.findTitleFromText(e)}},{key:"getText",value:function(){return this._text}},{key:"getDate",value:function(){return this._createdDate}},{key:"getEditionDate",value:function(){return this._editedDate}},{key:"getTitle",value:function(){return this._title}}])&&i(t.prototype,n),a&&i(t,a),e}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e),this._notes=t,this._selected=0}var t,n,o;return t=e,(n=[{key:"add_note",value:function(){var e=new a;return e.setSelected(!0),this._notes.forEach((function(e){return e.setSelected(!1)})),this._notes.push(e),this._selected=e.getDate(),e}},{key:"delete_note",value:function(e){for(var t=0;t<this._notes.length;t++)if(this._notes[t].getDate()==e){this._notes.splice(t,1);break}this._selected=0}},{key:"edit_note",value:function(e,t){for(var n=0;n<this._notes.length;n++)if(this._notes[n].getDate()===e){this._notes[n].setText(t);break}}},{key:"makeFirst",value:function(e){for(var t=0;t<this._notes.length;t++)if(this._notes[t].getDate()===e){var n=this._notes[t];this._notes.splice(t,1),this._notes.push(n);break}}}])&&l(t.prototype,n),o&&l(t,o),e}(),c=document.getElementById("notes_list"),u=document.getElementById("note"),f=document.getElementById("add_note"),_=document.getElementById("delete_note");function h(){c.innerHTML="",s._notes.forEach((function(e){var t=function(e){var t=document.createElement("li");t.classList.add("sidebar__note");var n=document.createElement("div");e.getSelected()&&t.classList.add("active");var o=document.createElement("h2");o.appendChild(document.createTextNode(e.getTitle())),n.appendChild(o);var i=document.createElement("time");i.appendChild(document.createTextNode("Creation date:"+g(e.getDate()))),n.appendChild(i);var a=document.createElement("time");return a.appendChild(document.createTextNode("Update date:"+g(e.getEditionDate()))),n.appendChild(a),t.appendChild(n),t.dataset.id=+e.getDate(),t}(e);c.insertBefore(t,c.firstChild),!0===e.getSelected()&&(u.value=e.getText())}))}function g(e){var t=e.getFullYear(),n=(1+e.getMonth()).toString();n=n.length>1?n:"0"+n;var o=e.getDate().toString();o=o.length>1?o:"0"+o;var i=e.getHours().toString();i=i.length>1?i:"0"+i;var a=e.getMinutes().toString();a=a.length>1?a:"0"+a;var r=e.getSeconds().toString();return o+"."+n+"."+t+" "+i+":"+a+":"+(r=r.length>1?r:"0"+r)}function v(e,t,n){""==n?window.history.replaceState(null,null,"".concat(e)):window.history.replaceState(null,null,"".concat(e,"/?").concat(t,"=").concat(n))}f.addEventListener("click",(function(e){v("/OKRlab2deploy","id",s.add_note()._urlID),h()})),_.addEventListener("click",(function(e){0!==s._selected&&(s.delete_note(s._selected),u.value="",u.disabled=!0,v("/OKRlab2deploy","",""),h(),console.log("s"))})),u.addEventListener("input",(function(e){s.edit_note(s._selected,u.value),s.makeFirst(s._selected),h()})),window.addEventListener("click",(function(e){if(e.target.classList.contains("sidebar__note")||"H2"==e.target.nodeName||"TIME"==e.target.nodeName){for(var t=e.target.dataset.id||e.target.parentNode.parentNode.dataset.id,n=0;n<s._notes.length;n++)t==+s._notes[n].getDate()?(s._notes[n].setSelected(!0),s._selected=s._notes[n].getDate(),u.disabled=!1,v("/OKRlab2deploy","id",s._notes[n].get_urlID())):s._notes[n].setSelected(!1);h()}})),window.addEventListener("unload",(function(e){localStorage.setItem("notes",JSON.stringify(s._notes))})),window.addEventListener("load",(function(){if(null===localStorage.getItem("notes"))localStorage.setItem("notes",JSON.stringify([])),s=new d;else{var e=JSON.parse(localStorage.getItem("notes"));e.forEach((function(e){e.__proto__=a.prototype,e._createdDate=new Date(e._createdDate),e._editedDate=new Date(e._editedDate),e._selected=!1})),s=new d(e)}u.disabled=!0;for(var t=function(e){var t=e.slice(1).split("&"),n={};return t.forEach((function(e){var t=e.split("=");n[t[0]]=t[1]})),n}(window.location.search),n=0;n<s._notes.length;n++)if(t.id==s._notes[n].get_urlID()){s._selected=s._notes[n].getDate(),s._notes[n].setSelected(!0),u.disabled=!1;break}h()}))}]);